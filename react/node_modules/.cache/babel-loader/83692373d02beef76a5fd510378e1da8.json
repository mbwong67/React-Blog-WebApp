{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/oliver/Projects/React-Blog-WebApp/react/src/pages/BlogDetails.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useParams } from \"react-router-dom\";\n\nconst BlogDetails = props => {\n  _s();\n\n  const history = useHistory();\n  const {\n    id\n  } = useParams();\n  const [blog, setBlog] = useState(null);\n  const [error, setError] = useState(null);\n  const [isPending, setIsPending] = useState(true);\n  const [isprivate, setIsprivate] = useState(true);\n  const [liked, setLiked] = useState(false);\n  const [likes, setLikes] = useState(0);\n  useEffect(() => {\n    axios.get(`http://localhost:3001/users/firebase-blog/${id}`).then(res => {\n      if (res.data.error) throw Error(res.data.error);\n      setBlog(res.data);\n      setIsprivate(res.data.private);\n      setIsPending(false);\n      axios.post('http://localhost:3001/users/getliked', {\n        blogid: id\n      }).then(res => {\n        if (res.data.error) throw Error(res.data.error);\n        setLikes(res.data.likes);\n        if (res.data.liked === 1) setLiked(true);\n      }).catch(err => {\n        setError(err.message);\n        setIsPending(false);\n      });\n    }).catch(err => {\n      setError(err.message);\n      setIsPending(false);\n    });\n  }, []);\n\n  if (!isPending && blog != null) {\n    document.getElementById('blog-body-fetch').innerHTML = blog.body;\n  }\n\n  const handlePublish = () => {\n    setIsPending(true);\n    axios.post('http://localhost:3001/users/update', {\n      ownerid: blog.uid,\n      blogid: id,\n      update: {\n        private: false\n      }\n    }).then(res => {\n      if (res.data.error) throw Error(res.data.error);\n      setIsPending(false);\n      setIsprivate(false);\n    }).catch(err => {\n      setError(err.message);\n      setIsPending(false);\n    });\n  };\n\n  const handlePrivate = () => {\n    setIsPending(true);\n    axios.post('http://localhost:3001/users/update', {\n      ownerid: blog.uid,\n      blogid: id,\n      update: {\n        private: true\n      }\n    }).then(res => {\n      if (res.data.error) throw Error(res.data.error);\n      setIsPending(false);\n      setIsprivate(true);\n    }).catch(err => {\n      setError(err.message);\n      setIsPending(false);\n    });\n  };\n\n  const handleEdit = () => {\n    history.push('/create', {\n      blog: blog,\n      blogid: id\n    });\n  };\n\n  const handleDelete = () => {\n    axios.post('http://localhost:3001/users/delete', {\n      ownerid: blog.uid,\n      blogid: id\n    }).then(res => {\n      if (res.data.error) throw Error(res.data.error);else {\n        history.push('/dashboard');\n      }\n    }).catch(err => {\n      setError(err.message);\n    });\n  };\n\n  const handleLike = () => {\n    setIsPending(true);\n    axios.post('http://localhost:3001/users/like', {\n      blogid: id\n    }).then(res => {\n      if (res.data.error) throw Error(res.data.error);\n      axios.post('http://localhost:3001/users/getliked', {\n        blogid: id\n      }).then(res => {\n        if (res.data.error) throw Error(res.data.error);\n        setLikes(res.data.likes);\n        if (res.data.liked === 1) setLiked(true);\n        setIsPending(false);\n      }).catch(err => {\n        setError(err.message);\n        setIsPending(false);\n      });\n    }).catch(err => {\n      setError(err.message);\n      setIsPending(false);\n    });\n  };\n\n  const handleUnLike = () => {\n    setIsPending(true);\n    axios.post('http://localhost:3001/users/unlike', {\n      blogid: id\n    }).then(res => {\n      if (res.data.error) throw Error(res.data.error);\n      axios.post('http://localhost:3001/users/getliked', {\n        blogid: id\n      }).then(res => {\n        if (res.data.error) throw Error(res.data.error);\n        setLikes(res.data.likes);\n        if (res.data.liked === 1) setLiked(true);else setLiked(false);\n        setIsPending(false);\n      }).catch(err => {\n        setError(err.message);\n        setIsPending(false);\n      });\n    }).catch(err => {\n      setError(err.message);\n      setIsPending(false);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"blog-details\",\n    children: [isPending && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 28\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 24\n    }, this), blog && /*#__PURE__*/_jsxDEV(\"article\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: blog.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: [\" ~ \", blog.author]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"blogSpace\",\n        id: \"blog-body-fetch\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), props.user.uid === blog.uid && (isprivate ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handlePublish,\n        children: \"Publish!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 62\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handlePrivate,\n        children: \"Make Private!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 114\n      }, this)), props.user.uid === blog.uid && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleEdit,\n        style: {\n          marginLeft: \"10px\"\n        },\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 49\n      }, this), props.user.uid === blog.uid && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDelete,\n        style: {\n          marginLeft: \"10px\"\n        },\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 49\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 36\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this), liked ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUnLike,\n        children: \"Liked!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 26\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLike,\n        children: \"Like!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 75\n      }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n        style: {\n          paddingLeft: \"10px\"\n        },\n        children: [likes, \" likes\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 9\n  }, this);\n};\n\n_s(BlogDetails, \"K/HBZ/RK0ZQd+p8w25LHu7LJGEA=\", false, function () {\n  return [useHistory, useParams];\n});\n\n_c = BlogDetails;\nexport default BlogDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"BlogDetails\");","map":{"version":3,"sources":["/home/oliver/Projects/React-Blog-WebApp/react/src/pages/BlogDetails.js"],"names":["axios","useEffect","useState","useHistory","useParams","BlogDetails","props","history","id","blog","setBlog","error","setError","isPending","setIsPending","isprivate","setIsprivate","liked","setLiked","likes","setLikes","get","then","res","data","Error","private","post","blogid","catch","err","message","document","getElementById","innerHTML","body","handlePublish","ownerid","uid","update","handlePrivate","handleEdit","push","handleDelete","handleLike","handleUnLike","title","author","user","marginLeft","paddingLeft"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\n\r\nconst BlogDetails = (props) =>\r\n{\r\n    const history=useHistory();\r\n    const { id } = useParams();\r\n    const [blog,setBlog] = useState(null);\r\n    const [error,setError] = useState(null);\r\n    const [isPending, setIsPending] =useState(true);\r\n    const [isprivate, setIsprivate] = useState(true);\r\n    const [liked, setLiked] = useState(false);\r\n    const [likes, setLikes] = useState(0);\r\n\r\n    useEffect(()=>\r\n    {\r\n        axios.get(`http://localhost:3001/users/firebase-blog/${id}`).then((res)=>{\r\n            if(res.data.error) throw Error(res.data.error);\r\n            setBlog(res.data);\r\n            setIsprivate(res.data.private);\r\n            setIsPending(false);\r\n            \r\n            axios.post('http://localhost:3001/users/getliked',{blogid:id}).then((res)=>{\r\n                if(res.data.error) throw Error(res.data.error);\r\n                setLikes(res.data.likes);\r\n                if(res.data.liked===1)\r\n                    setLiked(true);\r\n                \r\n            })\r\n            .catch((err)=>{ \r\n                setError(err.message);\r\n                setIsPending(false);\r\n            });\r\n        \r\n        })\r\n        .catch((err)=>{ \r\n            setError(err.message);\r\n            setIsPending(false);\r\n        });\r\n    \r\n    }, []);\r\n\r\n    \r\n    if(!isPending && blog!=null) {\r\n        document.getElementById('blog-body-fetch').innerHTML = blog.body;\r\n    }\r\n\r\n    const handlePublish = ()=>{\r\n\r\n        setIsPending(true);\r\n        axios.post('http://localhost:3001/users/update',{ownerid:blog.uid,blogid:id,update:{private:false}}).then((res)=>{\r\n            if(res.data.error) throw Error(res.data.error);\r\n            setIsPending(false);\r\n            setIsprivate(false);\r\n        }).catch((err)=>{\r\n            setError(err.message);\r\n            setIsPending(false);\r\n        });\r\n\r\n    };\r\n\r\n    const handlePrivate= ()=>{\r\n\r\n        setIsPending(true);\r\n        axios.post('http://localhost:3001/users/update',{ownerid:blog.uid,blogid:id,update:{private:true}}).then((res)=>{\r\n            if(res.data.error) throw Error(res.data.error);\r\n            setIsPending(false);\r\n            setIsprivate(true);\r\n        }).catch((err)=>{\r\n            setError(err.message);\r\n            setIsPending(false);\r\n        });\r\n    };\r\n\r\n    const handleEdit = ()=>{\r\n        \r\n        history.push('/create',{blog:blog, blogid:id});\r\n    }\r\n\r\n    const handleDelete = ()=>{\r\n\r\n        axios.post('http://localhost:3001/users/delete', {ownerid:blog.uid,blogid:id}).then((res)=>{\r\n            if(res.data.error) throw Error(res.data.error)\r\n            else{\r\n            history.push('/dashboard');}\r\n        }).catch((err)=>{\r\n            setError(err.message);\r\n        })\r\n\r\n    }\r\n\r\n    const handleLike = () =>{\r\n        setIsPending(true);\r\n        axios.post('http://localhost:3001/users/like', {blogid:id}).then((res)=>{\r\n            if(res.data.error) throw Error(res.data.error)\r\n            axios.post('http://localhost:3001/users/getliked',{blogid:id}).then((res)=>{\r\n                if(res.data.error) throw Error(res.data.error);\r\n                setLikes(res.data.likes);\r\n                if(res.data.liked===1)\r\n                    setLiked(true);\r\n                setIsPending(false);\r\n                \r\n            })\r\n            .catch((err)=>{ \r\n                setError(err.message);\r\n                setIsPending(false);\r\n            });\r\n\r\n        }).catch((err)=>{\r\n            setError(err.message);\r\n            setIsPending(false);\r\n        })\r\n    }\r\n\r\n    const handleUnLike = () =>{\r\n        setIsPending(true);\r\n        axios.post('http://localhost:3001/users/unlike', {blogid:id}).then((res)=>{\r\n            if(res.data.error) throw Error(res.data.error)\r\n            axios.post('http://localhost:3001/users/getliked',{blogid:id}).then((res)=>{\r\n                if(res.data.error) throw Error(res.data.error);\r\n                setLikes(res.data.likes);\r\n                if(res.data.liked===1)\r\n                    setLiked(true);\r\n                else\r\n                    setLiked(false);\r\n                setIsPending(false); \r\n            })\r\n            .catch((err)=>{ \r\n                setError(err.message);\r\n                setIsPending(false);\r\n            });\r\n        }).catch((err)=>{\r\n            setError(err.message);\r\n            setIsPending(false);\r\n        })\r\n    }\r\n     \r\n    return(\r\n        <div className=\"blog-details\">\r\n            { isPending && <div>Loading...</div> }\r\n            { error && <div>{error}</div> }\r\n            { blog &&\r\n            <article>\r\n                <h2>{blog.title}</h2>\r\n                <strong> ~ {blog.author}</strong>\r\n                <div  className=\"blogSpace\" id=\"blog-body-fetch\">\r\n                </div>\r\n                \r\n                 \r\n                {props.user.uid === blog.uid && (isprivate ? <button onClick={handlePublish}>Publish!</button> : <button onClick={handlePrivate}>Make Private!</button>)}\r\n                {props.user.uid === blog.uid && <button onClick={handleEdit} style={{\r\n                    marginLeft:\"10px\"\r\n                }}>Edit</button>}\r\n                {props.user.uid === blog.uid && <button onClick={handleDelete} style={{\r\n                    marginLeft:\"10px\"\r\n                }}>Delete</button>}<br/>\r\n                <br/>\r\n                {liked ? <button onClick={handleUnLike}>Liked!</button> : <button onClick={handleLike}>Like!</button>}\r\n                <small style={{\r\n                    paddingLeft: \"10px\"\r\n                }}>{likes} likes</small>\r\n                \r\n            </article>\r\n            }\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BlogDetails;"]},"metadata":{},"sourceType":"module"}