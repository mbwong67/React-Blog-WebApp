{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/oliver/Projects/React-Blog-WebApp/React/project/src/Create.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport axios from \"axios\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Create = props => {\n  _s();\n\n  const [title, setTitle] = useState('');\n  const [body, setBody] = useState('');\n  const [isPending, setIsPending] = useState(false);\n  const [error, setError] = useState(null);\n  const [check, setCheck] = useState(false);\n  const history = useHistory();\n  const toUpdate = history.location.state;\n\n  if (toUpdate != null && !check) {\n    const newline = new RegExp(\"<br/>\", \"g\");\n    const imageOpen = new RegExp(\"<img class='imgClass' src='\", \"g\");\n    const imageClose = new RegExp(\"'/>\", \"g\");\n    const showBody = toUpdate.blog.body.replace(newline, '\\n').replace(imageOpen, \"!img<<\").replace(imageClose, \">>\");\n    setTitle(toUpdate.blog.title);\n    setBody(showBody);\n    setCheck(true);\n  } //////////////////////////////////////////Submitting the blog\n\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (title === '') {\n      alert('Please enter a title');\n      return;\n    }\n\n    if (body === '') {\n      alert('Please enter contents of the blog');\n      return;\n    }\n\n    const uid = props.user.uid;\n    const author = props.user.displayName;\n    setIsPending(true);\n    const blog = {\n      title,\n      body,\n      author,\n      uid,\n      private: true,\n      likes: 0\n    };\n    const finalBlog = JSON.stringify(blog).replace(/\\\\n/g, \"<br/>\").replace(/!img<</g, \"<img class='imgClass' src='\").replace(/>>/g, \"'/>\");\n    axios.post('http://localhost:3001/users/firebase-blog', {\n      'blog': JSON.parse(finalBlog)\n    }).then(res => {\n      if (res.data.error) {\n        throw Error(res.data.error);\n      }\n\n      setIsPending(false);\n      history.push(`/blogs/${res.data.blogId}`); //send to other page\n    }).catch(err => {\n      setError(err.message);\n      setIsPending(false);\n    });\n  }; ///////////////////////////////////////////////Updating the blog\n\n\n  const handleUpdate = e => {\n    e.preventDefault();\n\n    if (title === '') {\n      alert('Please enter a title');\n      return;\n    }\n\n    if (body === '') {\n      alert('Please enter contents of the blog');\n      return;\n    }\n\n    setIsPending(true);\n    const finalBlog = JSON.stringify({\n      title: title,\n      body: body\n    }).replace(/\\\\n/g, \"<br/>\").replace(/!img<</g, \"<img class='imgClass' src='\").replace(/>>/g, \"'/>\");\n    axios.post('http://localhost:3001/users/update', {\n      ownerid: toUpdate.blog.uid,\n      blogid: toUpdate.blogid,\n      update: JSON.parse(finalBlog)\n    }).then(res => {\n      if (res.data.error) throw Error(res.data.error);\n      setIsPending(false);\n      console.log(res);\n      history.push(`/blogs/${toUpdate.blogid}`);\n    }).catch(err => {\n      setError(err.message);\n      setIsPending(false);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"create\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Create a new blog\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Blog Title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"blog-title\",\n        id: \"blog-title\",\n        required: true,\n        type: \"text\",\n        value: title,\n        onChange: e => setTitle(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Blog Body\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"blog-body\",\n        id: \"blog-body\",\n        required: true,\n        value: body,\n        rows: \"40\",\n        onChange: e => setBody(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), toUpdate == null && !isPending && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 42\n      }, this), toUpdate == null && isPending && /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: true,\n        children: \"Adding Blog...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 41\n      }, this), toUpdate == null && error && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 37\n      }, this), toUpdate != null && !isPending && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpdate,\n        children: \"Update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 42\n      }, this), toUpdate != null && isPending && /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: true,\n        children: \"Updating Blog...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 41\n      }, this), toUpdate != null && error && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Create, \"4hD6hSCVbl+GjNGEgE0TkRzZ2VU=\", false, function () {\n  return [useHistory];\n});\n\n_c = Create;\nexport default Create;\n\nvar _c;\n\n$RefreshReg$(_c, \"Create\");","map":{"version":3,"sources":["/home/oliver/Projects/React-Blog-WebApp/React/project/src/Create.js"],"names":["React","axios","useState","useHistory","Create","props","title","setTitle","body","setBody","isPending","setIsPending","error","setError","check","setCheck","history","toUpdate","location","state","newline","RegExp","imageOpen","imageClose","showBody","blog","replace","handleSubmit","e","preventDefault","alert","uid","user","author","displayName","private","likes","finalBlog","JSON","stringify","post","parse","then","res","data","Error","push","blogId","catch","err","message","handleUpdate","ownerid","blogid","update","console","log","target","value"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from \"axios\";\r\nimport { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n \r\nconst Create = (props) =>{\r\n\r\n    const [title,setTitle] = useState('');\r\n    const [body,setBody] = useState('');\r\n    const [isPending,setIsPending]=useState(false);\r\n    const [error, setError]=useState(null)\r\n    const [check,setCheck]=useState(false);\r\n\r\n    const history = useHistory();\r\n    const toUpdate=history.location.state;\r\n    if(toUpdate!=null && !check)\r\n    {   \r\n        const newline=new RegExp(\"<br/>\",\"g\");\r\n        const imageOpen=new RegExp(\"<img class='imgClass' src='\",\"g\");\r\n        const imageClose=new RegExp(\"'/>\",\"g\");\r\n\r\n        const showBody=toUpdate.blog.body.replace(newline,'\\n').replace(imageOpen,\"!img<<\").replace(imageClose,\">>\");\r\n        setTitle(toUpdate.blog.title);\r\n        setBody(showBody);\r\n        setCheck(true);\r\n    }\r\n\r\n    //////////////////////////////////////////Submitting the blog\r\n    const handleSubmit = (e)=>{\r\n\r\n        e.preventDefault();\r\n\r\n        if(title==='') {alert('Please enter a title');return;}\r\n        if(body==='') {alert('Please enter contents of the blog');return;}\r\n        const uid=props.user.uid;\r\n        const author = props.user.displayName;\r\n        setIsPending(true);\r\n        const blog={title,body,author,uid,private:true,likes:0};\r\n        const finalBlog = (JSON.stringify(blog)).replace(/\\\\n/g,\"<br/>\").replace(/!img<</g,\"<img class='imgClass' src='\").replace(/>>/g,\"'/>\");\r\n        axios.post('http://localhost:3001/users/firebase-blog',{'blog':JSON.parse(finalBlog)})\r\n        .then((res)=>{\r\n            if(res.data.error)\r\n            {\r\n                throw Error(res.data.error);\r\n            }\r\n            setIsPending(false);\r\n            \r\n            history.push(`/blogs/${res.data.blogId}`);\r\n            //send to other page\r\n        })\r\n        .catch((err)=>{\r\n            setError(err.message);\r\n            setIsPending(false)\r\n        });\r\n    };\r\n    ///////////////////////////////////////////////Updating the blog\r\n\r\n    const handleUpdate = (e)=>{\r\n        e.preventDefault();\r\n        if(title==='') {alert('Please enter a title');return;}\r\n        if(body==='') {alert('Please enter contents of the blog');return;}\r\n        setIsPending(true);\r\n        const finalBlog = (JSON.stringify({title:title, body:body})).replace(/\\\\n/g,\"<br/>\").replace(/!img<</g,\"<img class='imgClass' src='\").replace(/>>/g,\"'/>\");\r\n        axios.post('http://localhost:3001/users/update',{ownerid:toUpdate.blog.uid,blogid:toUpdate.blogid,update:JSON.parse(finalBlog)}).then((res)=>{\r\n            if(res.data.error) throw Error(res.data.error);\r\n            setIsPending(false);\r\n            console.log(res);\r\n            history.push(`/blogs/${toUpdate.blogid}`);\r\n\r\n        }).catch((err)=>{\r\n            setError(err.message);\r\n            setIsPending(false);\r\n        });\r\n    };\r\n\r\n    return(    \r\n    <div className=\"create\">\r\n    <h2>Create a new blog</h2>\r\n    <form onSubmit={handleSubmit}>\r\n        <label>Blog Title</label>\r\n        <input\r\n          name=\"blog-title\"\r\n          id=\"blog-title\"\r\n          required\r\n          type=\"text\"\r\n          value={title}\r\n          onChange={(e) => setTitle(e.target.value)} \r\n            />\r\n        <label>Blog Body</label>\r\n        <textarea\r\n          name=\"blog-body\"\r\n          id=\"blog-body\"\r\n          required\r\n          value={body}\r\n          rows=\"40\"\r\n          onChange={(e) => setBody(e.target.value)}\r\n        ></textarea>\r\n\r\n        {toUpdate==null && !isPending && <button onClick={handleSubmit}>Submit</button>}\r\n        {toUpdate==null && isPending && <button disabled>Adding Blog...</button>}\r\n        {toUpdate==null && error && <p>{error}</p>}\r\n\r\n        {toUpdate!=null && !isPending && <button onClick={handleUpdate}>Update</button>}\r\n        {toUpdate!=null && isPending && <button disabled>Updating Blog...</button>}\r\n        {toUpdate!=null && error && <p>{error}</p>}\r\n\r\n    </form>\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default Create;"]},"metadata":{},"sourceType":"module"}